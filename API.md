# API
## 정의
API(Application Programming Interface) = 응용 프로그램 프로그래밍 인터페이스  
**컴퓨터나 컴퓨터 프로그램 사이의 연결**  
프로그램을 작성하기 위한 일련의 부프로그램, 프로토콜 등을 정의하여 상호 작용을 하기 위한 인터페이스 사양
## API의 작동 방법
**클라이언트(서버 이용자)가 요청을 보내면 서버가 응답을 하는식**  
클라이언트가 요청을 보냄(버튼을 클릭등)→서버가 요청을 받고 응답을 보냄→클라이언트는 응답대로 이동(페이지를 이동,구매등)  
## 유형
### 데이터(DB) API
**애플리케이션과 데이터베이스 관리 시스템을 연결**하는 데 사용 (ex:온라인 쇼핑에서 재고,정보등을 표시하는데 사용)
### 운영 체제(로컬) API
**앱이 운영 체제 서비스 및 리소스를 사용하는 방법을 정의**하는 데 사용(ex:파일 관리 프로그램이 운영 체제의 파일 시스템에 접근하여 파일을 열거나 삭제하는 경우)
### 원격 API
다양한 **디바이스의 애플리케이션 상호 작용하는 방식을 정의**하는데 사용(ex:핸드폰으로 조명을 끄는등의 행동을 할때 사용)
### 웹 API
**HTTP 프로토콜을 사용하여 인터넷을 통해 데이터 및 기능을 전송**할 수 있도록 하는 데 사용(ex:웹)  
최근들어 많이 사용되는 추세
#### 웹 API 주요 유형
##### 오픈 API
HTTP 프로토콜로 액세스할 수 있는 오픈 소스 애플리케이션 프로그래밍 인터페이스  
**엔드포인트와 요청 및 응답 형식을 정의**  
##### 파트너 API
전략적 비즈니스 파트너를 연결
##### 내부 API
내부 또는 비공개 API는 외부 사용자에게 숨겨진 상태로 유지
##### 복합 API
여러 데이터 또는 서비스 API를 결합
여러 소스의 정보가 필요할 수 있는 마이크로서비스 아키텍처에서 유용  
## API 프로토콜, 아키텍처 스타일 및 언어
과거 = 하위 프로그래밍언어(ex:Javascript)로 만든 **애플리케이션에 연결된 인터페이스**  
현재 = **주로 HTTP용으로 사용**→ 여러 언어 사용(Java,Ruby,Ptrhon)
### SOAP(Simple Object Access Protocol)단순 객체 액세스 프로토콜
끝점에서 SMTP(Simple Mail Transfer Protocol) 및 HTTP를 비롯한 다양한 통신 프로토콜을 통해 **데이터를 보내고 받을 수 있도록 하는 간단한 XML기반 메시징 프로토콜 사양**
### RPC(Remote Procedure Call) 원격 프로시저 호출
운영 체제에서 사용되는 **높은 수준의 통신 패러다임을 제공**하는 프로토콜  
#### 특징
통신 프로그램 간에 메세지 데이터를 전달하기 위해 **TCP/IP/UDP와 같은 하위 수준전송 프로토콜이 있다고 가정**  
네트워크 응용 프로그램을 지원하기 위해 **특별히 설계된 논리적 클라이언트-서버 통신 시스템을 구현**  
사용자가 프로시저가 로컬인 것처럼 **원격 프로시저를 사용 가능**  
#### 종류
1. XML-RPC
   ```
   특정 XML 형식을 사용하여 데이터를 전송
   SOAP보다 오래되었지만 최소 대역폭을 사용한다는 점에서 더 간단하고 상대적으로 가볍
   ```
2. JSON-RPC
   ```
   XML대신 JSON을 사용하는 원격 프로시저 호출  
   JSON은 파싱이 간단하고 이름/값 쌍과 정렬된 값 목록을 사용하는 간단한 데이터 교환 형식  
   범용 데이터 구조를 사용하므로 모든 프로그래밍 언어와 함께 사용 가능
   ```
3. gRPC
   ```
   Google에서 처음 개발한 고성능 오픈소스 RPC 프레임워크  
   네트워크 프로토콜 HTTP/2 및 프로토콜 버퍼 데이터 형식을 사용
   일반 적으로 마이크로 서비스 아키텍처에서 서비스를 연결하는 데 사용
   ```
### REST
[Rest](https://github.com/pgsshiho/TIL/blob/main/%23%20REST%20API.md)
### GraphQL
Facebook이 2012년에 내부적으로 개발한 쿼리 언어 및 API 런타임 이였다
클라이언트가 **API와 상호 작용하는 방법을 지정**하는 오픈 소스 쿼리 언어 및 서버 측 런타임  
파라미터가 많은 복잡한 엔드포인트에 액세스할 필요 없이 **단 몇 줄로 API 요청을 수행 가능**  
API 쿼리, 특히 **여러 리소스를 대상**으로 하는 **더 복잡하거나 구체적인 요청을 더 쉽게 생성하고 응답**가능
## REST vs SOAP
### 공통점
SOAP 및 REST는 API 설계에 대한 다양한 접근 방식을 나타냄   
API가 다른 애플리케이션과 상호 작용하는 방법에 대한 규칙 및 표준을 설명
### 차이점
**REST**: 가볍고 유연하고 투명하고 상대적으로 사용하기 쉬움/일반 텍스트, HTML, YAML, XML 및 JSON과 같은 다양한 형식의 메시징을 지원  
**SOAP**: 유형 검사로 인해 더욱 결정적이고 강력/지지자들은 많은 개발 툴에 내장된 SOAP 지원으로 인해 SOAP가 사용하기 더 쉽다고 주장/ XML만 허용
## REST vs GraphQL
### 공통점
모두 상태 비저장,클라이언트/서버 모델을 사용하며 HTTP를 사용
### 차이점
**GraphQL**:단일 요청으로 원하는 리소스를 보다 정확하게 타기팅할 수 있는 기능을 제공,런트엔드 요구 사항이 빠르게 변화하는 복잡한 환경에서 API를 구축하는 데 특히 유용  
**REST**:고정된 구조를 따르며 항상 지정된 개체에 대한 전체 데이터 집합을 반환,일반적으로 구현하기가 더 쉬우며 엄격한 액세스 제어를 갖춘 간단하고 캐싱이 가능한 통신 프로토콜을 선호하는 경우  
## API 서비스 및 마이크로서비스
### API와 웹 서비스 비교
웹 서비스는 네트워크를 통한 데이터 전송을 용이하게 하는 인터넷 소프트웨어 구성 요소  
웹 서비스는 애플리케이션의 데이터와 기능을 다른 애플리케이션에 노출하므로 **사실상 모든 웹 서비스는 API**  
**모든 API가 웹 서비스는 아니다**
**API**:연결이 끊긴 두 애플리케이션 사이에서 중개자 역할을 하는 모든 소프트웨어 구성 요소